{
  "comments": [
    {
      "key": {
        "uuid": "fa82b9bf_4b330614",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/RaftActor.java",
        "patchSetId": 4
      },
      "lineNbr": 133,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-16T19:28:17Z",
      "side": 1,
      "message": "I would argue to remove RaftState class. Its confusing whether state transitions should happen between RaftState or RaftActorBehavior.\n\nWe could change the method signature to \nprivate RaftActorBehavior switchBehavior(Class\u003c? extends RaftActorBehavior\u003e behavior) \n\nSwitching behavior based on provided behavior seems more clear.",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_6b6a8aef",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/RaftActor.java",
        "patchSetId": 4
      },
      "lineNbr": 138,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-16T19:06:33Z",
      "side": 1,
      "message": "To be consistent, the log should say \"Switching from behaviour\".",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_2b3ec2da",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/RaftActor.java",
        "patchSetId": 4
      },
      "lineNbr": 170,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-16T20:05:02Z",
      "side": 1,
      "message": "Change to \"Persisting data \" and add term and id info.",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_49122e0a",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/AbstractRaftActorBehavior.java",
        "patchSetId": 4
      },
      "lineNbr": 143,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-17T22:23:44Z",
      "side": 1,
      "message": "perhaps rename this to handleRequestVote() to be consistent with other method names.",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_094ae625",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/Candidate.java",
        "patchSetId": 4
      },
      "lineNbr": 71,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-17T22:23:44Z",
      "side": 1,
      "message": "Argument \"suggestedState\" seems out of place.",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_c9b87e13",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/Candidate.java",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-17T22:23:44Z",
      "side": 1,
      "message": "Couldnt this mean that a new leader has been elected and it has sent a log entry or heartbeat?\n\nAFAIK, this candidate should check the term and log entry in the incoming message \na. If incoming message has older term or log entry then reject the message\nb. Otherwise handle message and step down",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_49446e1a",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/Candidate.java",
        "patchSetId": 4
      },
      "lineNbr": 79,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-17T22:23:44Z",
      "side": 1,
      "message": "Argument \"suggestedState\" seems out of place.",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_693932a3",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/Candidate.java",
        "patchSetId": 4
      },
      "lineNbr": 82,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-17T22:23:44Z",
      "side": 1,
      "message": "We should add some logging here for traceability of message.",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_09718675",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/Candidate.java",
        "patchSetId": 4
      },
      "lineNbr": 138,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-17T22:23:44Z",
      "side": 1,
      "message": "Is there any retry logic to request for vote when a peer failed to vote?",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_e97d421d",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/Follower.java",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-18T00:46:06Z",
      "side": 1,
      "message": "Follower can not schedule election. Candidate should be doing it.",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_c9707e42",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/Follower.java",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-18T00:46:06Z",
      "side": 1,
      "message": "Suggest breaking this method into smaller methods.",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_097bc628",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/Follower.java",
        "patchSetId": 4
      },
      "lineNbr": 170,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-18T00:46:06Z",
      "side": 1,
      "message": "Scheduling election is a responsibility of Candidate.",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_a973ba4c",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/Follower.java",
        "patchSetId": 4
      },
      "lineNbr": 176,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-18T00:46:06Z",
      "side": 1,
      "message": "Same comment.....start/stop election is the job of a Candidate.",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa82b9bf_cb7876c6",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/RaftActorBehavior.java",
        "patchSetId": 4
      },
      "lineNbr": 45,
      "author": {
        "id": 807
      },
      "writtenOn": "2014-07-16T19:06:33Z",
      "side": 1,
      "message": "IMO, the \"state\" belong to state machine i.e RaftActor. Infact, I would argue that state property is redundant. There are 3 distinct behavior types, Leader, Candidate and Follower that are sufficient to differentiate between behaviors.",
      "revId": "ef3c9df06af2b6bff08cafb17ae686f0ad098f75",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}