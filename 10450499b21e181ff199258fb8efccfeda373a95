{
  "comments": [
    {
      "key": {
        "uuid": "9a561d44_cf71bc0d",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ChainedCommitCohort.java",
        "patchSetId": 7
      },
      "lineNbr": 46,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-07-29T14:46:18Z",
      "side": 1,
      "message": "This does not use the callback that\u0027s passed in. Shouldn\u0027t this call delegate.commit(callback)?",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_2514d99e",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ChainedCommitCohort.java",
        "patchSetId": 7
      },
      "lineNbr": 46,
      "author": {
        "id": 649
      },
      "writtenOn": "2016-07-29T16:53:32Z",
      "side": 1,
      "message": "right, it should propagate the calls in onSuccess/onFailure",
      "parentUuid": "9a561d44_cf71bc0d",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_4f5dac78",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/CompositeDataTreeCohort.java",
        "patchSetId": 7
      },
      "lineNbr": 141,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-07-29T14:46:18Z",
      "side": 1,
      "message": "sendMesageToSuccessful (sic) - I know it was like that before..",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_2065e7b4",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/CompositeDataTreeCohort.java",
        "patchSetId": 7
      },
      "lineNbr": 141,
      "author": {
        "id": 649
      },
      "writtenOn": "2016-08-01T12:21:54Z",
      "side": 1,
      "message": "right, it does send a message to cohorts which have previously reported success... not sure what would be a better name.",
      "parentUuid": "9a561d44_4f5dac78",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_1f3c2f93",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/CompositeDataTreeCohort.java",
        "patchSetId": 7
      },
      "lineNbr": 141,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-08-01T13:11:25Z",
      "side": 1,
      "message": "The name is fine - it\u0027s misspelled :)  sic -\u003e spelling incorrect",
      "parentUuid": "9a561d44_2065e7b4",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_0fce142e",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/Shard.java",
        "patchSetId": 7
      },
      "lineNbr": 197,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-07-29T14:46:18Z",
      "side": 1,
      "message": "extraneous change (a lot of these).  Is space after if official ODL coding style?",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_853de52d",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/Shard.java",
        "patchSetId": 7
      },
      "lineNbr": 197,
      "author": {
        "id": 649
      },
      "writtenOn": "2016-07-29T16:44:38Z",
      "side": 1,
      "message": "Yes it is, and the default checkstyle configuration from odlparent) complains about that. Also thigs like:\n\ncatch(Exception)\nif (){\nfoo\u003dabc\n\nSince we are overriding that config, we can forgo them for now, though.",
      "parentUuid": "9a561d44_0fce142e",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_021f0b6d",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardCommitCoordinator.java",
        "patchSetId": 7
      },
      "lineNbr": 443,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-07-29T14:46:18Z",
      "side": 1,
      "message": "It looks like this method is no longer called - ShardDataTree handles it.",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_82495b33",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardCommitCoordinator.java",
        "patchSetId": 7
      },
      "lineNbr": 493,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-07-29T14:46:18Z",
      "side": 1,
      "message": "Should be \u003c maxModificationsPerBatch",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_e252d7dc",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardCommitCoordinator.java",
        "patchSetId": 7
      },
      "lineNbr": 529,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-07-29T14:46:18Z",
      "side": 1,
      "message": "Why was this method re-written? Didn\u0027t seem necessary for this patch.",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_82703b73",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardDataTree.java",
        "patchSetId": 7
      },
      "lineNbr": 379,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-07-29T14:46:18Z",
      "side": 1,
      "message": "You can remove this if you want. I have a patch to handle/avoid this scenario in RaftActor.",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_8524c50d",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardDataTree.java",
        "patchSetId": 7
      },
      "lineNbr": 379,
      "author": {
        "id": 649
      },
      "writtenOn": "2016-07-29T16:53:32Z",
      "side": 1,
      "message": "Let\u0027s keep here for now and remove once your patch lands",
      "parentUuid": "9a561d44_82703b73",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_42290336",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardDataTree.java",
        "patchSetId": 7
      },
      "lineNbr": 389,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-07-29T14:46:18Z",
      "side": 1,
      "message": "Why would we propagate the journal index? That\u0027s internal raft details and I don\u0027t think we want to leak that.",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_450f4d88",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardDataTree.java",
        "patchSetId": 7
      },
      "lineNbr": 389,
      "author": {
        "id": 649
      },
      "writtenOn": "2016-07-29T16:53:32Z",
      "side": 1,
      "message": "This is related to the notion I mentioned about a month ago, that it would be potentially useful to have a notion of a cluster-wide unique identifier of a committed transaction. The combination of shard identifier and journal index is exactly that.\n\nI thought to lay the ground work here instead of using a Void...",
      "parentUuid": "9a561d44_42290336",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_457f4d66",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardDataTree.java",
        "patchSetId": 7
      },
      "lineNbr": 543,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-07-29T14:46:18Z",
      "side": 1,
      "message": "The ShardCommitCoordinator handleAbort will remove the current cohort and also can-commit the next one if ready. This will call canCommit on the SimpleDataTreeCohort which will fail if already in the CAN_COMMIT_PENDING state. In fact it looks like this issue could occur any time a tx is complete and ShardCommitCoordinator calls maybeProcessNextCohortEntry. Unless I\u0027m missing something...",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_1c9a7d14",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardDataTree.java",
        "patchSetId": 7
      },
      "lineNbr": 543,
      "author": {
        "id": 649
      },
      "writtenOn": "2016-08-01T12:21:54Z",
      "side": 1,
      "message": "I am not sure I understand. The key difference between ShardCommitCoordinator\u0027s queue and pendingTransactions here is that the latter holds only transactions which have transitioned to CAN_COMMIT_PENDING, while the former also holds READY transactions.\n\nI think I changed ShardCommitCoordinator to immediately issue CanCommit *only* when the corresponding message arrives -- hence the lifecycle is handled by ShardDataTree.",
      "parentUuid": "9a561d44_457f4d66",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a6b29fe_3fd3eb39",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardDataTree.java",
        "patchSetId": 7
      },
      "lineNbr": 543,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-08-01T13:11:25Z",
      "side": 1,
      "message": "yeah - you\u0027re right - I missed that. The SCC only CanCommits the head of the queue at which point it gets queued here.",
      "parentUuid": "7a6b29fe_1c9a7d14",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_42d463bc",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/SimpleShardDataTreeCohort.java",
        "patchSetId": 7
      },
      "lineNbr": 159,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-07-29T14:46:18Z",
      "side": 1,
      "message": "Should we ensure the current state is CAN_COMMIT_PENDING? Same with failedCanCommit, successfulPreCommit et al",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a561d44_e51dc1bf",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/SimpleShardDataTreeCohort.java",
        "patchSetId": 7
      },
      "lineNbr": 159,
      "author": {
        "id": 649
      },
      "writtenOn": "2016-07-29T16:53:32Z",
      "side": 1,
      "message": "Sure, more defensiveness does not hurt :)",
      "parentUuid": "9a561d44_42d463bc",
      "revId": "10450499b21e181ff199258fb8efccfeda373a95",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}