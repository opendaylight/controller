{
  "comments": [
    {
      "key": {
        "uuid": "9a6a9dd7_41b04f8b",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/AbstractTransactionContextFactory.java",
        "patchSetId": 4
      },
      "lineNbr": 185,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-06-10T12:28:00Z",
      "side": 1,
      "message": "Do we even need the limiter for local transactions? The mod operations are synchronous to the caller. Also, now that there\u0027s a limiter per TransactionContext,  the LocalTransactionContext would need to acquire - it doesn\u0027t now, just releases.  But then it would do, e.g. acquire -\u003e write to local DOM Tx -\u003e release which seems unnecessary now.",
      "revId": "44dbf4a17011d5e82e10b3dff79b3c4d31801ac0",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a6a9dd7_fc0266b3",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/AbstractTransactionContextFactory.java",
        "patchSetId": 4
      },
      "lineNbr": 185,
      "author": {
        "id": 795
      },
      "writtenOn": "2015-06-10T14:57:06Z",
      "side": 1,
      "message": "We do not need the limiter for local transactions per se - currently there is an asymmetry in how acquire/release. We acquire when enqueueing operation in TransactionContextWrapper and then release when the operation is completed in the TransactionContext. Let me see if I can do something about that.",
      "parentUuid": "9a6a9dd7_41b04f8b",
      "revId": "44dbf4a17011d5e82e10b3dff79b3c4d31801ac0",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a6a9dd7_7c82d601",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/AbstractTransactionContextFactory.java",
        "patchSetId": 4
      },
      "lineNbr": 185,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-06-10T15:20:06Z",
      "side": 1,
      "message": "Yeah in enqueueTransactionOperation - missed that. We don\u0027t know at that point if the TC will be local or remote. We can leave it that way but it seems we do need to acquire in LocalTransactionContext as is done in the remote one. \n\nThe other option is to do no limiting in LocalTransactionContext and just release all permits once the hand-off occurs to a LocalTransactionContext (in the factory\u0027s createLocalTransactionContext method).",
      "parentUuid": "9a6a9dd7_fc0266b3",
      "revId": "44dbf4a17011d5e82e10b3dff79b3c4d31801ac0",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}