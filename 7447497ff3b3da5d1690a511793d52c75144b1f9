{
  "comments": [
    {
      "key": {
        "uuid": "7a96c907_48d6d3f2",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/test/java/org/opendaylight/controller/cluster/datastore/ThreePhaseCommitCohortProxyTest.java",
        "patchSetId": 8
      },
      "lineNbr": 336,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-02-10T05:06:40Z",
      "side": 1,
      "message": "Can we make this deterministic with a CountDownLatch instead of an artificial sleep? Eg,\n\nfinal CountDownLatch setTxCreationLimitLatch \u003d new CountDownLatch(1);\n\nAnswer\u003cVoid\u003e answer \u003d new Answer\u003cVoid\u003e() {\n    @Override\n    public Void answer(InvocationOnMock invocation) {\n        setTxCreationLimitLatch.countDown();\n        return null;\n    }\n};\n        \ndoAnswer(answer).when(actorContext).setTxCreationLimitLatch(0.5);\n\n...\n\nassertEquals(\"setTxCreationLimitLatch was not invoked\",true,\n    Uninterruptibles.awaitUninterruptibly(\n         setTxCreationLimitLatch, 5, TimeUnit.SECONDS));",
      "revId": "7447497ff3b3da5d1690a511793d52c75144b1f9",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_d8a2b24a",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/test/java/org/opendaylight/controller/cluster/datastore/ThreePhaseCommitCohortProxyTest.java",
        "patchSetId": 8
      },
      "lineNbr": 336,
      "author": {
        "id": 795
      },
      "writtenOn": "2015-02-11T17:57:41Z",
      "side": 1,
      "message": "I believe I have an even cleaner deterministic fix :)\n\nverify(actorContext, timeout(5000)).setTxCreationLimit(0.5);",
      "parentUuid": "7a96c907_48d6d3f2",
      "revId": "7447497ff3b3da5d1690a511793d52c75144b1f9",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_ab566ecc",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/test/java/org/opendaylight/controller/cluster/datastore/ThreePhaseCommitCohortProxyTest.java",
        "patchSetId": 8
      },
      "lineNbr": 336,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-02-11T20:33:16Z",
      "side": 1,
      "message": "yup that\u0027s easier - didn\u0027t realize you could specify timeout on verify - good to know.",
      "parentUuid": "7a96c907_d8a2b24a",
      "revId": "7447497ff3b3da5d1690a511793d52c75144b1f9",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}