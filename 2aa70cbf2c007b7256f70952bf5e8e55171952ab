{
  "comments": [
    {
      "key": {
        "uuid": "fa57193c_0de30c34",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/site/asciidoc/shard-raft-behavior.adoc",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 649
      },
      "writtenOn": "2016-05-17T15:12:33Z",
      "side": 1,
      "message": "I do not believe Shard needs to be a PersistentActor, as all its persistence should be handled by RaftActor.",
      "range": {
        "startLine": 41,
        "startChar": 64,
        "endLine": 41,
        "endChar": 86
      },
      "revId": "2aa70cbf2c007b7256f70952bf5e8e55171952ab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba51214e_1bd55f43",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/site/asciidoc/shard-raft-behavior.adoc",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 1842
      },
      "writtenOn": "2016-06-13T06:19:32Z",
      "side": 1,
      "message": "No - snapshotting is part of raft.",
      "parentUuid": "fa57193c_cfc5763d",
      "range": {
        "startLine": 41,
        "startChar": 64,
        "endLine": 41,
        "endChar": 86
      },
      "revId": "2aa70cbf2c007b7256f70952bf5e8e55171952ab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba51214e_2edbb81c",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/site/asciidoc/shard-raft-behavior.adoc",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 649
      },
      "writtenOn": "2016-06-14T18:14:39Z",
      "side": 1,
      "message": "Actually RaftActor needs to request a snapshot and Shard should reply with a complete snapshot. The reason for this is that the snapshot needs to contain a point-in-time consistent view of multiple things:\n- the data tree\n- last committed transaction ID for each alive chain\n- tombstones for freestanding transactions which have not been acked by frontend\n- the schema context\n\nand all of this information needs to be replicated to followers via RAFT. First piece is obvious, second and third are needed to resync state with frontends, the third one is needed for recovery (in the future).",
      "parentUuid": "ba51214e_1bd55f43",
      "range": {
        "startLine": 41,
        "startChar": 64,
        "endLine": 41,
        "endChar": 86
      },
      "revId": "2aa70cbf2c007b7256f70952bf5e8e55171952ab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}