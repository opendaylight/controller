{
  "comments": [
    {
      "key": {
        "uuid": "7a96c907_da13a664",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/HeartbeatActor.java",
        "patchSetId": 1
      },
      "lineNbr": 103,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-02-01T04:46:09Z",
      "side": 1,
      "message": "Do we need to look this up every time (looks potentially expensive)?",
      "revId": "6d5b03344abc49b8ed3f4c81a1534a2403b8e66b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_90d73ded",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/HeartbeatActor.java",
        "patchSetId": 1
      },
      "lineNbr": 103,
      "author": {
        "id": 1903
      },
      "writtenOn": "2015-02-02T23:51:56Z",
      "side": 1,
      "message": "This was done to handle scenario if actorselection is there, but not actorreference. which i am not really sure. Look at comment in AbstractLeader.java",
      "parentUuid": "7a96c907_da13a664",
      "revId": "6d5b03344abc49b8ed3f4c81a1534a2403b8e66b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_702151fa",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/HeartbeatActor.java",
        "patchSetId": 1
      },
      "lineNbr": 103,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-02-03T03:06:20Z",
      "side": 1,
      "message": "Which comment? I guess I don\u0027t understand why getSingleActorRefFromSelector is necessary. It\u0027s only used to decide whether to schedule the heartbeat but handleReceive accesses followerActor regardless. Also if  followerActorRef.isPresent was false the first time, the heartbeat would never be scheduled on subsequent calls because heartbeatPayload would be non-null.",
      "parentUuid": "7a96c907_90d73ded",
      "revId": "6d5b03344abc49b8ed3f4c81a1534a2403b8e66b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_3a1dea73",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/HeartbeatActor.java",
        "patchSetId": 1
      },
      "lineNbr": 108,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-02-01T04:46:09Z",
      "side": 1,
      "message": "This is scheduled once on the first AppendEntries sent so that instance will be sent in every heartbeat. If the index data is updated in a subsequent AppendEntries it won\u0027t get picked up here. How about using the SendHeartbeat message here?",
      "revId": "6d5b03344abc49b8ed3f4c81a1534a2403b8e66b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_5009b593",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/HeartbeatActor.java",
        "patchSetId": 1
      },
      "lineNbr": 108,
      "author": {
        "id": 1903
      },
      "writtenOn": "2015-02-02T23:51:56Z",
      "side": 1,
      "message": "yes, you are right, i was under the impression that if i change the object in reference, scheduler will automatically pick the new object, but that is not the case. I am canceling and restarting the scheduler, if appendEntry message with updated data comes in.",
      "parentUuid": "7a96c907_3a1dea73",
      "revId": "6d5b03344abc49b8ed3f4c81a1534a2403b8e66b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_1011edab",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/HeartbeatActor.java",
        "patchSetId": 1
      },
      "lineNbr": 108,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-02-03T03:06:20Z",
      "side": 1,
      "message": "I think it would be easier to use the SendHeartbeat message here. Then in handleReceive, on SendHeartbeat, send heartbeatPayload to the followerActor. This would be more efficient than stopping/starting the schedule  as it could happen a lot.",
      "parentUuid": "7a96c907_5009b593",
      "revId": "6d5b03344abc49b8ed3f4c81a1534a2403b8e66b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_da3c06e5",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/AbstractLeader.java",
        "patchSetId": 1
      },
      "lineNbr": 91,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-02-01T04:17:35Z",
      "side": 1,
      "message": "Please make these private with accessors, if needed.",
      "revId": "6d5b03344abc49b8ed3f4c81a1534a2403b8e66b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_7a2b7294",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/AbstractLeader.java",
        "patchSetId": 1
      },
      "lineNbr": 291,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-02-01T04:46:09Z",
      "side": 1,
      "message": "It does\u0027t look like we need this anymore.",
      "revId": "6d5b03344abc49b8ed3f4c81a1534a2403b8e66b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_fa3f82d4",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/AbstractLeader.java",
        "patchSetId": 1
      },
      "lineNbr": 340,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-02-01T04:17:35Z",
      "side": 1,
      "message": "Is it safe to capture this once? I think this is dynamic - other code looks it up when needed. Also, I\u0027ve seen this return null.",
      "revId": "6d5b03344abc49b8ed3f4c81a1534a2403b8e66b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_70dcf112",
        "filename": "opendaylight/md-sal/sal-akka-raft/src/main/java/org/opendaylight/controller/cluster/raft/behaviors/AbstractLeader.java",
        "patchSetId": 1
      },
      "lineNbr": 340,
      "author": {
        "id": 1903
      },
      "writtenOn": "2015-02-02T23:51:56Z",
      "side": 1,
      "message": "hmm, I am not sure, I thought ActorSelection will always be there even if ActorReference is not present, that is why I am checking ActorReference before scheduling the heartbeat. So, Other possibility could be create these supporting actors only for those followers, whose ActorReference is getting resolved at this time. Create other follower\u0027s supporting actor dynamically, when they join cluster.",
      "parentUuid": "7a96c907_fa3f82d4",
      "revId": "6d5b03344abc49b8ed3f4c81a1534a2403b8e66b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}