{
  "comments": [
    {
      "key": {
        "uuid": "1a76adc5_4975c796",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/DatastoreContext.java",
        "patchSetId": 2
      },
      "lineNbr": 182,
      "author": {
        "id": 795
      },
      "writtenOn": "2015-10-05T13:27:16Z",
      "side": 1,
      "message": "I don\u0027t like this public setter on DatastoreContext. DatastoreContext is built using a builder and once built I\u0027d prefer that we did not mutate it.",
      "range": {
        "startLine": 182,
        "startChar": 16,
        "endLine": 182,
        "endChar": 38
      },
      "revId": "0ca51f459ca026fd682727a3e26aadda58630cd9",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a76adc5_e9acd3ef",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/DatastoreContext.java",
        "patchSetId": 2
      },
      "lineNbr": 182,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-10-05T13:33:26Z",
      "side": 1,
      "message": "OK. I can create a builder from the current DatastoreContext and set it that way.",
      "parentUuid": "1a76adc5_4975c796",
      "range": {
        "startLine": 182,
        "startChar": 16,
        "endLine": 182,
        "endChar": 38
      },
      "revId": "0ca51f459ca026fd682727a3e26aadda58630cd9",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a76adc5_49d14756",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/DatastoreContext.java",
        "patchSetId": 2
      },
      "lineNbr": 182,
      "author": {
        "id": 795
      },
      "writtenOn": "2015-10-05T13:48:41Z",
      "side": 1,
      "message": "This should be set in the module. It can be done and it will be less confusing for us going forward - because all of the rest of the datastorecontext is set there.",
      "parentUuid": "1a76adc5_e9acd3ef",
      "range": {
        "startLine": 182,
        "startChar": 16,
        "endLine": 182,
        "endChar": 38
      },
      "revId": "0ca51f459ca026fd682727a3e26aadda58630cd9",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a76adc5_c94b172a",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/DatastoreContext.java",
        "patchSetId": 2
      },
      "lineNbr": 182,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-10-05T13:59:45Z",
      "side": 1,
      "message": "I could but I wanted to keep the ShardPeerAddressResolver private/owned by the ShardManager as its the ShardManager that adds/removes member addresses and it keeps state for the ShardManager. Also if the cfg file is modified and a new DatastoreContext is created, it would create a new ShardPeerAddressResolver instance which would lose the previous instance and wipe out the ShardManager\u0027s state. To alleviate that the ShardManager would have to still reset the ShardPeerAddressResolver instance in the new DatastoreContext. That doesn\u0027t seem clean to me.",
      "parentUuid": "1a76adc5_49d14756",
      "range": {
        "startLine": 182,
        "startChar": 16,
        "endLine": 182,
        "endChar": 38
      },
      "revId": "0ca51f459ca026fd682727a3e26aadda58630cd9",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a76adc5_a9001bab",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/DatastoreContext.java",
        "patchSetId": 2
      },
      "lineNbr": 182,
      "author": {
        "id": 795
      },
      "writtenOn": "2015-10-05T14:25:33Z",
      "side": 1,
      "message": "If this really ShardManager private then should we set this on DataStoreContext? That does not seem logical. How about we just pass the peer resolver to the Shards, that way it\u0027s explicit and the instance of the peer resolver can be maintained as a field in ShardManager.",
      "parentUuid": "1a76adc5_c94b172a",
      "range": {
        "startLine": 182,
        "startChar": 16,
        "endLine": 182,
        "endChar": 38
      },
      "revId": "0ca51f459ca026fd682727a3e26aadda58630cd9",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a76adc5_693203a9",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/DatastoreContext.java",
        "patchSetId": 2
      },
      "lineNbr": 182,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-10-05T14:26:12Z",
      "side": 1,
      "message": "The other option is to pass the ShardPeerAddressResolver directly to the Shard actor. But I didn\u0027t want to change signatures and add yet another param. So I used the ConfigParams via the DatastoreContext as a vehicle to pass it. I don\u0027t think it\u0027s wrong for the ShardManager to set its ShardPeerAddressResolver instance in the DatastoreContext.",
      "parentUuid": "1a76adc5_c94b172a",
      "range": {
        "startLine": 182,
        "startChar": 16,
        "endLine": 182,
        "endChar": 38
      },
      "revId": "0ca51f459ca026fd682727a3e26aadda58630cd9",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a76adc5_29740b98",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardManager.java",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 795
      },
      "writtenOn": "2015-10-05T13:27:16Z",
      "side": 1,
      "message": "we shouldn\u0027t set the peer address resolver here. I think the only reason you\u0027re doing this here is because you get the current member name from the cluster here. The member name can also be retrieved from akka config. How about just getting it from there?",
      "range": {
        "startLine": 134,
        "startChar": 30,
        "endLine": 134,
        "endChar": 52
      },
      "revId": "0ca51f459ca026fd682727a3e26aadda58630cd9",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a76adc5_89b99f30",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardManager.java",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 1842
      },
      "writtenOn": "2015-10-05T13:33:26Z",
      "side": 1,
      "message": "I\u0027m not sure I follow. I\u0027m doing it here so it\u0027s set for every shard on creation. Where else would I set it?",
      "parentUuid": "1a76adc5_29740b98",
      "range": {
        "startLine": 134,
        "startChar": 30,
        "endLine": 134,
        "endChar": 52
      },
      "revId": "0ca51f459ca026fd682727a3e26aadda58630cd9",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a76adc5_69ef631f",
        "filename": "opendaylight/md-sal/sal-distributed-datastore/src/main/java/org/opendaylight/controller/cluster/datastore/ShardManager.java",
        "patchSetId": 2
      },
      "lineNbr": 134,
      "author": {
        "id": 795
      },
      "writtenOn": "2015-10-05T13:47:26Z",
      "side": 1,
      "message": "The dataStore context and peer resolve are common to all in a given datastore - so how about in the datastore config module where the datastorecontext is built?",
      "parentUuid": "1a76adc5_89b99f30",
      "range": {
        "startLine": 134,
        "startChar": 30,
        "endLine": 134,
        "endChar": 52
      },
      "revId": "0ca51f459ca026fd682727a3e26aadda58630cd9",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}