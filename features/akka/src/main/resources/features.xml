<?xml version="1.0" encoding="UTF-8"?>
<features name="akka.features-${project.version}" xmlns="http://karaf.apache.org/xmlns/features/v1.0.0">

    <feature name="rest-all" description="REST bundle needed for the RESTful interface">
        <feature>akka</feature>
        <feature>spray</feature>
        <feature>feature-service</feature>
        <feature>rest</feature>
    </feature>

    <feature name="osgi-compendium" description="OSGi compendium feature" version="4.2.0" resolver="(obr)">
        <bundle start-level="10">mvn:org.osgi/org.osgi.compendium/4.3.0</bundle>
    </feature>

    <feature name="scala" description="Scala" version="2.10" resolver="(obr)">
      <bundle start-level="15">wrap:mvn:org.scala-lang/scala-library/2.10.4</bundle>
      <bundle start-level="15">wrap:mvn:org.scala-lang/scala-reflect/2.10.4</bundle>
      <bundle start-level="15">wrap:mvn:org.scala-lang/scala-compiler/2.10.4</bundle>
    </feature>

    <feature name="protobuf" description="Protobuf feature" version="2.4.1_1" resolver="(obr)">
        <bundle start-level="20">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.protobuf-java/2.4.1_1</bundle>
        <bundle>mvn:com.google.protobuf/protobuf-java/2.5.0</bundle>
    </feature>

    <feature name="netty" description="Netty feature" version="3.8.0.Final" resolver="(obr)">
        <bundle start-level="20">wrap:mvn:io.netty/netty/3.8.0.Final</bundle>
        <!--bundle>wrap:mvn:org.jboss.netty/netty/3.8.0.Final</bundle-->
        <feature>protobuf</feature>
        <feature>uncommons-maths</feature>
        <bundle>wrap:mvn:org.objenesis/objenesis/2.0</bundle>
        <bundle>wrap:mvn:commons-logging/commons-logging/1.1.3</bundle>
        <bundle>wrap:mvn:org.apache.felix/org.osgi.compendium/1.4.0</bundle>
        <bundle>wrap:mvn:org.apache.felix/org.osgi.core/1.4.0</bundle>
        <bundle>wrap:mvn:javax.servlet/javax.servlet-api/3.1.0</bundle>
        <bundle>wrap:mvn:junit/junit/4.11</bundle>
        <bundle>wrap:mvn:log4j/log4j/1.2.17</bundle>
        <bundle>wrap:mvn:javax.servlet/javax.servlet-api/3.1.0</bundle>
        <bundle>wrap:mvn:org.easymock/easymock/3.2</bundle>
        <!--bundle>wrap:mvn:org.easymock/easymockclassextension/3.2</bundle-->
        <bundle>wrap:mvn:org.jboss.logging/jboss-logging-spi/2.1.2.GA</bundle>
        <bundle>wrap:mvn:org.slf4j/slf4j-api/1.7.7</bundle>
        <bundle>wrap:mvn:org.slf4j/slf4j-simple/1.7.7</bundle>
    </feature>

    <feature name='uncommons-maths' description='Uncommons Maths' version='1.2.2' resolver='(obr)'>
        <!-- TODO replace this with upstream uncommons maths 1.2.3 which is OSGi enabled -->
        <bundle start-level="20">wrap:mvn:org.uncommons.maths/uncommons-maths/1.2.2</bundle>
    </feature>

    <feature name="typesafe-config" description="Typesafe config" version="0.4.0" resolver="(obr)">
        <feature version="2.10">scala</feature>
        <bundle start-level="25">mvn:com.typesafe/config/1.2.1</bundle>
    </feature>

    <feature name='leveldb' description='LevelDB feature' version='0.7' resolver='(obr)'>
        <bundle start-level="20">wrap:mvn:org.iq80.leveldb/leveldb/0.7</bundle>
        <bundle start-level="20">wrap:mvn:org.fusesource.leveldbjni/leveldbjni-all/1.8</bundle>
    </feature>

    <feature name="akka" description="Akka" version="2.3.2" resolver="(obr)">
        <feature version="2.10">scala</feature>
        <feature>netty</feature>
        <feature>leveldb</feature>
        <feature version="2.4.1_1">protobuf</feature>
        <feature version="[0.4.0,2.0.0)">typesafe-config</feature>
        <bundle start-level="30">wrap:mvn:com.typesafe.akka/akka-actor_2.10/2.3.3</bundle>
        <bundle start-level="30">wrap:mvn:com.typesafe.akka/akka-osgi_2.10/2.3.3</bundle>
        <bundle start-level="30">wrap:mvn:com.typesafe.akka/akka-remote_2.10/2.3.3</bundle>
        <bundle start-level="30">wrap:mvn:com.typesafe.akka/akka-cluster_2.10/2.3.3</bundle>
        <bundle start-level="30">wrap:mvn:com.typesafe.akka/akka-persistence-experimental_2.10/2.3.3</bundle>
        <bundle start-level="30">wrap:mvn:com.typesafe.akka/akka-slf4j_2.10/2.3.3</bundle>
    </feature>

    <!--feature name="dining-hakker" description="Akka Dining Hakker Sample" version="${project.version}" resolver="(obr)">
        <feature version="2.3.2">akka</feature>
        <bundle start-level="50">wrap:mvn:com.typesafe.akka/akka-sample-osgi-dining-hakkers-api_2.10</bundle>
        <bundle start-level="50">wrap:mvn:com.typesafe.akka/core/${project.version}</bundle>
        <bundle start-level="50">wrap:mvn:com.typesafe.akka/command/${project.version}</bundle>
    </feature-->

    <feature name="rest" description="REST Interface">
        <feature>akka</feature>
        <feature>spray</feature>
        <feature>feature-service</feature>
        <bundle start-level="50">wrap:mvn:com.typesafe.akka/akka-contrib_2.10/2.3.2</bundle>
        <bundle start-level="50">mvn:org.opendaylight.controller/rest/${rest.version}</bundle>
    </feature>

    <feature name="feature-service" description="Feature to install / remove features" resolver="(obr)">
        <bundle start-level="50">wrap:mvn:org.apache.karaf.features/org.apache.karaf.features.core/3.0.1</bundle>
    </feature>

    <feature name="spray" description="Spray IO">
        <bundle>wrap:mvn:org.parboiled/parboiled-java/1.1.6</bundle>
        <bundle>wrap:mvn:org.parboiled/parboiled-core/1.1.6</bundle>
        <bundle>wrap:mvn:org.parboiled/parboiled-scala_2.10/1.1.6</bundle>
        <bundle>wrap:mvn:io.spray/spray-http/1.3.1</bundle>
        <bundle>wrap:mvn:io.spray/spray-io/1.3.1</bundle>
        <bundle>wrap:mvn:io.spray/spray-json_2.10/1.2.6</bundle>
        <bundle>wrap:mvn:com.googlecode.concurrentlinkedhashmap/concurrentlinkedhashmap-lru/1.4</bundle>
        <bundle>wrap:mvn:io.spray/spray-caching/1.3.1</bundle>
        <bundle>wrap:mvn:org.jvnet.mimepull/mimepull/1.9.4</bundle>
        <bundle>wrap:mvn:io.spray/spray-httpx/1.3.1</bundle>
        <bundle>wrap:mvn:io.spray/spray-routing/1.3.1</bundle>
        <bundle>wrap:mvn:io.spray/spray-http/1.3.1</bundle>
        <bundle>wrap:mvn:io.spray/spray-util/1.3.1</bundle>
        <bundle>wrap:mvn:io.spray/spray-can/1.3.1</bundle>
    </feature>

</features>